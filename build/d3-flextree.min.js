!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";function n(){function n(n){var e=l(n);return A=e,t(e,0),h(e),x(e,0),S(e),n}function i(n){if(this.t=n,this.prelim=0,this.mod=0,this.shift=0,this.change=0,this.msel=0,this.mser=0,n.x=0,n.y=0,b)this.xSize=1,this.ySize=1;else if(Array.isArray(j))this.xSize=j[0],this.ySize=j[1];else{var e=j(n);this.xSize=e[0],this.ySize=e[1]}this.children=[],this.numChildren=0}function l(n){for(var e=new i(n),r=e.children,t=n.children?n.children.length:0,d=0;d<t;++d)r.push(l(n.children[d]));return e.numChildren=t,e}function t(n,e){n.t.y=e,d(n)}function d(n){var e,r=n.t.y+n.ySize;for(e=0;e<n.children.length;++e){n.children[e].t.y=r,d(n.children[e])}}function h(n){if(0===n.numChildren)return void c(n);h(n.children[0]);for(var e=z(s(n.children[0].el),0,null),r=1;r<n.numChildren;++r){h(n.children[r]);var i=s(n.children[r].er);o(n,r,e),e=z(i,r,e)}v(n),c(n)}function c(n){0===n.numChildren?(n.el=n,n.er=n,n.msel=n.mser=0):(n.el=n.children[0].el,n.msel=n.children[0].msel,n.er=n.children[n.numChildren-1].er,n.mser=n.children[n.numChildren-1].mser)}function o(n,e,r){for(var i=n.children[e-1],l=i.mod,t=n.children[e],d=t.mod;void 0!==i&&void 0!==t;){s(i)>r.lowY&&(r=r.nxt);var h=l+i.prelim-(d+t.prelim);null!==w?h+=w(i.t,t.t)*A.xSize:null!==Y&&(h+=i.xSize/2+t.xSize/2+Y(i.t,t.t)),h>0?(d+=h,u(n,e,r.index,h)):1===e&&0===d&&0===i.numChildren&&t.numChildren>1&&h<0&&(d+=h,u(n,e,r.index,h));var c=s(i),o=s(t);c<=o&&void 0!==(i=f(i))&&(l+=i.mod),c>=o&&void 0!==(t=m(t))&&(d+=t.mod)}void 0===i&&void 0!==t?a(n,e,t,d):void 0!==i&&void 0===t&&p(n,e,i,l)}function u(n,e,r,i){n.children[e].mod+=i,n.children[e].msel+=i,n.children[e].mser+=i,y(n,e,r,i)}function m(n){return 0===n.numChildren?n.tl:n.children[0]}function f(n){return 0===n.numChildren?n.tr:n.children[n.numChildren-1]}function s(n){return n.t.y+n.ySize}function a(n,e,r,i){var l=n.children[0].el;l.tl=r;var t=i-r.mod-n.children[0].msel;l.mod+=t,l.prelim-=t,n.children[0].el=n.children[e].el,n.children[0].msel=n.children[e].msel}function p(n,e,r,i){var l=n.children[e].er;l.tr=r;var t=i-r.mod-n.children[e].mser;l.mod+=t,l.prelim-=t,n.children[e].er=n.children[e-1].er,n.children[e].mser=n.children[e-1].mser}function v(n){n.prelim=(n.children[0].prelim+n.children[0].mod-n.children[0].xSize/2+n.children[n.numChildren-1].mod+n.children[n.numChildren-1].prelim+n.children[n.numChildren-1].xSize/2)/2}function x(n,e){e+=n.mod,n.t.x=n.prelim+e,C(n);for(var r=0;r<n.numChildren;r++)x(n.children[r],e)}function y(n,e,r,i){if(r!==e-1){var l=e-r;n.children[r+1].shift+=i/l,n.children[e].shift-=i/l,n.children[e].change-=i-i/l}}function C(n){for(var e=0,r=0,i=0;i<n.numChildren;i++)e+=n.children[i].shift,r+=e+n.children[i].change,n.children[i].mod+=r}function z(n,e,r){for(;null!==r&&n>=r.lowY;)r=r.nxt;return{lowY:n,index:e,nxt:r}}function S(n){if(null!==b){for(var e,r=n,i=n,l=n,t=[n];e=t.pop();){var d=e.t;d.x<r.t.x&&(r=e),d.x>i.t.x&&(i=e),d.depth>l.t.depth&&(l=e),e.children&&(t=t.concat(e.children))}var h=void 0===w?.5:w(r.t,i.t)/2,c=h-r.t.x,o=b[0]/(i.t.x+h+c),u=b[1]/(l.t.depth>0?l.t.depth:1);for(t=[n];e=t.pop();){var d=e.t;d.x=(d.x+c)*o,d.y=d.depth*u,e.children&&(t=t.concat(e.children))}}else{g(n,-n.t.x)}}function g(n,e){n.t.x+=e;for(var r=0;r<n.numChildren;++r)g(n.children[r],e)}var w=e,Y=null,b=[1,1],j=null,A=null;return i.prototype=Object.create(r.prototype),n.separation=function(e){return arguments.length?(w=e,Y=null,n):w},n.spacing=function(e){return arguments.length?(Y=e,w=null,n):Y},n.size=function(e){return arguments.length?(b=e,j=null,n):b},n.nodeSize=function(e){return arguments.length?(j=e,b=null,n):j},n}function e(n,e){return n.parent===e.parent?1:2}const r=require("d3-hierarchy/src/hierarchy/index").Node;module.exports=n});